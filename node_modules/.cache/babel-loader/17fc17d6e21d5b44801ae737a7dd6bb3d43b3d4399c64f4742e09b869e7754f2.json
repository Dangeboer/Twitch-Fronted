{"ast":null,"code":"const SERVER_ORIGIN=\"\";const loginUrl=`${SERVER_ORIGIN}/login`;export const login=credential=>{const formData=new FormData();formData.append(\"username\",credential.username);formData.append(\"password\",credential.password);// 浏览器发送请求\nreturn fetch(loginUrl,{method:\"POST\",credentials:\"include\",body:formData// 如果成功了\n}).then(response=>{if(response.status!==204){throw Error(\"Fail to log in\");}});};const registerUrl=`${SERVER_ORIGIN}/register`;export const register=data=>{return fetch(registerUrl,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(response=>{if(response.status!==200){throw Error(\"Fail to register\");}});};const logoutUrl=`${SERVER_ORIGIN}/logout`;export const logout=()=>{return fetch(logoutUrl,{method:\"POST\",credentials:\"include\"}).then(response=>{if(response.status!==204){throw Error(\"Fail to log out\");}});};const topGamesUrl=`${SERVER_ORIGIN}/game`;export const getTopGames=()=>{return fetch(topGamesUrl).then(response=>{if(response.status!==200){throw Error(\"Fail to get top games\");}return response.json();});};const getGameDetailsUrl=`${SERVER_ORIGIN}/game?game_name=`;const getGameDetails=gameName=>{return fetch(`${getGameDetailsUrl}${gameName}`).then(response=>{if(response.status!==200){throw Error(\"Fail to find the game\");}return response.json();});};const searchGameByIdUrl=`${SERVER_ORIGIN}/search?game_id=`;export const searchGameById=gameId=>{return fetch(`${searchGameByIdUrl}${gameId}`).then(response=>{if(response.status!==200){throw Error(\"Fail to find the game\");}return response.json();});};export const searchGameByName=gameName=>{return getGameDetails(gameName).then(data=>{if(data&&data[0].id){return searchGameById(data[0].id);}throw Error(\"Fail to find the game\");});};const favoriteItemUrl=`${SERVER_ORIGIN}/favorite`;export const addFavoriteItem=favItem=>{return fetch(favoriteItemUrl,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\",body:JSON.stringify({favorite:favItem})}).then(response=>{if(response.status!==200){throw Error(\"Fail to add favorite item\");}});};export const deleteFavoriteItem=favItem=>{return fetch(favoriteItemUrl,{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\",body:JSON.stringify({favorite:favItem})}).then(response=>{if(response.status!==200){throw Error(\"Fail to delete favorite item\");}});};export const getFavoriteItem=()=>{return fetch(favoriteItemUrl,{credentials:\"include\"}).then(response=>{if(response.status!==200){throw Error(\"Fail to get favorite item\");}return response.json();});};const getRecommendedItemsUrl=`${SERVER_ORIGIN}/recommendation`;export const getRecommendations=()=>{return fetch(getRecommendedItemsUrl,{credentials:\"include\"}).then(response=>{if(response.status!==200){throw Error(\"Fail to get recommended item\");}return response.json();});};","map":{"version":3,"names":["SERVER_ORIGIN","loginUrl","login","credential","formData","FormData","append","username","password","fetch","method","credentials","body","then","response","status","Error","registerUrl","register","data","headers","JSON","stringify","logoutUrl","logout","topGamesUrl","getTopGames","json","getGameDetailsUrl","getGameDetails","gameName","searchGameByIdUrl","searchGameById","gameId","searchGameByName","id","favoriteItemUrl","addFavoriteItem","favItem","favorite","deleteFavoriteItem","getFavoriteItem","getRecommendedItemsUrl","getRecommendations"],"sources":["/Users/dangeboer/Desktop/ProjectClass/Twitch/my-app/src/utils.js"],"sourcesContent":["const SERVER_ORIGIN = \"\";\n\nconst loginUrl = `${SERVER_ORIGIN}/login`;\n\nexport const login = (credential) => {\n  const formData = new FormData();\n  formData.append(\"username\", credential.username);\n  formData.append(\"password\", credential.password);\n\n  // 浏览器发送请求\n  return fetch(loginUrl, {\n    method: \"POST\",\n    credentials: \"include\",\n    body: formData,\n    // 如果成功了\n  }).then((response) => {\n    if (response.status !== 204) {\n      throw Error(\"Fail to log in\");\n    }\n  });\n};\n\nconst registerUrl = `${SERVER_ORIGIN}/register`;\n\nexport const register = (data) => {\n  return fetch(registerUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to register\");\n    }\n  });\n};\n\nconst logoutUrl = `${SERVER_ORIGIN}/logout`;\n\nexport const logout = () => {\n  return fetch(logoutUrl, {\n    method: \"POST\",\n    credentials: \"include\",\n  }).then((response) => {\n    if (response.status !== 204) {\n      throw Error(\"Fail to log out\");\n    }\n  });\n};\n\nconst topGamesUrl = `${SERVER_ORIGIN}/game`;\n\nexport const getTopGames = () => {\n  return fetch(topGamesUrl).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to get top games\");\n    }\n\n    return response.json();\n  });\n};\n\nconst getGameDetailsUrl = `${SERVER_ORIGIN}/game?game_name=`;\n\nconst getGameDetails = (gameName) => {\n  return fetch(`${getGameDetailsUrl}${gameName}`).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to find the game\");\n    }\n\n    return response.json();\n  });\n};\n\nconst searchGameByIdUrl = `${SERVER_ORIGIN}/search?game_id=`;\n\nexport const searchGameById = (gameId) => {\n  return fetch(`${searchGameByIdUrl}${gameId}`).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to find the game\");\n    }\n    return response.json();\n  });\n};\n\nexport const searchGameByName = (gameName) => {\n  return getGameDetails(gameName).then((data) => {\n    if (data && data[0].id) {\n      return searchGameById(data[0].id);\n    }\n\n    throw Error(\"Fail to find the game\");\n  });\n};\n\nconst favoriteItemUrl = `${SERVER_ORIGIN}/favorite`;\n\nexport const addFavoriteItem = (favItem) => {\n  return fetch(favoriteItemUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    credentials: \"include\",\n    body: JSON.stringify({ favorite: favItem }),\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to add favorite item\");\n    }\n  });\n};\n\nexport const deleteFavoriteItem = (favItem) => {\n  return fetch(favoriteItemUrl, {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    credentials: \"include\",\n    body: JSON.stringify({ favorite: favItem }),\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to delete favorite item\");\n    }\n  });\n};\n\nexport const getFavoriteItem = () => {\n  return fetch(favoriteItemUrl, {\n    credentials: \"include\",\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to get favorite item\");\n    }\n\n    return response.json();\n  });\n};\n\nconst getRecommendedItemsUrl = `${SERVER_ORIGIN}/recommendation`;\n\nexport const getRecommendations = () => {\n  return fetch(getRecommendedItemsUrl, {\n    credentials: \"include\",\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw Error(\"Fail to get recommended item\");\n    }\n\n    return response.json();\n  });\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}